"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var icons_1 = require("@sanity/icons");
var ui_1 = require("@sanity/ui");
var react_1 = __importDefault(require("react"));
var react_redux_1 = require("react-redux");
var searchFacets_1 = require("../../config/searchFacets");
var search_1 = require("../../modules/search");
var SearchFacet_1 = __importDefault(require("../SearchFacet"));
var TextInputNumber_1 = __importDefault(require("../TextInputNumber"));
var SearchFacetNumber = function (props) {
    var _a;
    var facet = props.facet;
    // Redux
    var dispatch = react_redux_1.useDispatch();
    var modifiers = facet === null || facet === void 0 ? void 0 : facet.modifiers;
    var selectedModifier = (facet === null || facet === void 0 ? void 0 : facet.modifier) ? modifiers === null || modifiers === void 0 ? void 0 : modifiers.find(function (modifier) { return modifier.name === (facet === null || facet === void 0 ? void 0 : facet.modifier); }) : modifiers === null || modifiers === void 0 ? void 0 : modifiers[0];
    var handleOperatorItemClick = function (operatorType) {
        dispatch(search_1.searchActions.facetsUpdate({ name: facet.name, operatorType: operatorType }));
    };
    var handleModifierClick = function (modifier) {
        dispatch(search_1.searchActions.facetsUpdate({ name: facet.name, modifier: modifier.name }));
    };
    var handleValueChange = function (value) {
        dispatch(search_1.searchActions.facetsUpdate({ name: facet.name, value: value }));
    };
    var selectedOperatorType = (_a = facet.operatorType) !== null && _a !== void 0 ? _a : 'greaterThan';
    return (react_1.default.createElement(SearchFacet_1.default, { facet: facet },
        (facet === null || facet === void 0 ? void 0 : facet.operatorTypes) && (react_1.default.createElement(ui_1.MenuButton, { button: react_1.default.createElement(ui_1.Button, { fontSize: 1, iconRight: icons_1.SelectIcon, padding: 2, text: searchFacets_1.operators[selectedOperatorType].label }), id: "operators", menu: react_1.default.createElement(ui_1.Menu, null, facet.operatorTypes.map(function (operatorType, index) {
                if (operatorType) {
                    return (react_1.default.createElement(ui_1.MenuItem, { disabled: operatorType === selectedOperatorType, fontSize: 1, key: operatorType, onClick: function () { return handleOperatorItemClick(operatorType); }, padding: 2, text: searchFacets_1.operators[operatorType].label }));
                }
                return react_1.default.createElement(ui_1.MenuDivider, { key: index });
            })) })),
        react_1.default.createElement(ui_1.Box, { marginX: 1, style: { maxWidth: '50px' } },
            react_1.default.createElement(TextInputNumber_1.default, { fontSize: 1, onValueChange: handleValueChange, padding: 2, radius: 2, width: 2, value: facet === null || facet === void 0 ? void 0 : facet.value })),
        modifiers && (react_1.default.createElement(ui_1.MenuButton, { button: react_1.default.createElement(ui_1.Button, { fontSize: 1, iconRight: icons_1.SelectIcon, padding: 2, text: selectedModifier === null || selectedModifier === void 0 ? void 0 : selectedModifier.title }), id: "modifier", menu: react_1.default.createElement(ui_1.Menu, null, modifiers.map(function (modifier) { return (react_1.default.createElement(ui_1.MenuItem, { disabled: modifier.name === facet.modifier, fontSize: 1, key: modifier.name, onClick: function () { return handleModifierClick(modifier); }, padding: 2, text: modifier.title })); })) }))));
};
exports.default = SearchFacetNumber;
//# sourceMappingURL=index.js.map