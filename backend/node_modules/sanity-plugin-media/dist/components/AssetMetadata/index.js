"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var icons_1 = require("@sanity/icons");
var ui_1 = require("@sanity/ui");
var format_1 = __importDefault(require("date-fns/format"));
var filesize_1 = __importDefault(require("filesize"));
var react_1 = __importDefault(require("react"));
var getAssetResolution_1 = __importDefault(require("../../utils/getAssetResolution"));
var typeGuards_1 = require("../../utils/typeGuards");
var ButtonAssetCopy_1 = __importDefault(require("../ButtonAssetCopy"));
var Row = function (_a) {
    var label = _a.label, value = _a.value;
    return (react_1.default.createElement(ui_1.Flex, { justify: "space-between" },
        react_1.default.createElement(ui_1.Text, { size: 1, style: {
                opacity: 0.8,
                width: '40%'
            }, textOverflow: "ellipsis" }, label),
        react_1.default.createElement(ui_1.Text, { size: 1, style: {
                opacity: 0.4,
                textAlign: 'right',
                width: '60%'
            }, textOverflow: "ellipsis" }, value)));
};
var AssetMetadata = function (props) {
    var _a;
    var asset = props.asset, item = props.item;
    var exif = (_a = asset === null || asset === void 0 ? void 0 : asset.metadata) === null || _a === void 0 ? void 0 : _a.exif;
    // Callbacks
    var handleDownload = function () {
        window.location.href = asset.url + "?dl=" + asset.originalFilename;
    };
    return (react_1.default.createElement(ui_1.Box, { marginTop: 3 },
        react_1.default.createElement(ui_1.Box, null,
            react_1.default.createElement(ui_1.Stack, { space: 3 },
                react_1.default.createElement(Row, { label: "Size", value: filesize_1.default(asset === null || asset === void 0 ? void 0 : asset.size, { base: 10, round: 0 }) }),
                react_1.default.createElement(Row, { label: "MIME type", value: asset === null || asset === void 0 ? void 0 : asset.mimeType }),
                react_1.default.createElement(Row, { label: "Extension", value: (asset === null || asset === void 0 ? void 0 : asset.extension).toUpperCase() }),
                typeGuards_1.isImageAsset(asset) && react_1.default.createElement(Row, { label: "Dimensions", value: getAssetResolution_1.default(asset) }))),
        exif && (react_1.default.createElement(react_1.default.Fragment, null,
            react_1.default.createElement(ui_1.Box, { marginY: 4, style: {
                    background: '#222',
                    height: '1px',
                    width: '100%'
                } }),
            react_1.default.createElement(ui_1.Box, null,
                react_1.default.createElement(ui_1.Stack, { space: 3 },
                    exif.ISO && react_1.default.createElement(Row, { label: "ISO", value: exif.ISO }),
                    exif.FNumber && react_1.default.createElement(Row, { label: "Aperture", value: "\u0192/" + exif.FNumber }),
                    exif.FocalLength && react_1.default.createElement(Row, { label: "Focal length", value: exif.FocalLength + "mm" }),
                    exif.ExposureTime && (react_1.default.createElement(Row, { label: "Exposure time", value: "1/" + 1 / exif.ExposureTime })),
                    exif.DateTimeOriginal && (react_1.default.createElement(Row, { label: "Original date", value: format_1.default(new Date(exif.DateTimeOriginal), 'PPp') })))))),
        react_1.default.createElement(ui_1.Box, { marginTop: 5 },
            react_1.default.createElement(ui_1.Inline, { space: 2 },
                react_1.default.createElement(ui_1.Button, { disabled: !item || (item === null || item === void 0 ? void 0 : item.updating), fontSize: 1, icon: icons_1.DownloadIcon, mode: "ghost", onClick: handleDownload, text: "Download" }),
                react_1.default.createElement(ButtonAssetCopy_1.default, { disabled: !item || (item === null || item === void 0 ? void 0 : item.updating), url: asset.url })))));
};
exports.default = AssetMetadata;
//# sourceMappingURL=index.js.map