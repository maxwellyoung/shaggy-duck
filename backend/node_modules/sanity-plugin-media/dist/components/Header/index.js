"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var icons_1 = require("@sanity/icons");
var ui_1 = require("@sanity/ui");
var pluralize_1 = __importDefault(require("pluralize"));
var react_1 = __importDefault(require("react"));
var AssetSourceDispatchContext_1 = require("../../contexts/AssetSourceDispatchContext");
var DropzoneDispatchContext_1 = require("../../contexts/DropzoneDispatchContext");
var useTypedSelector_1 = __importDefault(require("../../hooks/useTypedSelector"));
var Header = function (props) {
    var onClose = props.onClose;
    var open = DropzoneDispatchContext_1.useDropzoneActions().open;
    var onSelect = AssetSourceDispatchContext_1.useAssetSourceActions().onSelect;
    // Redux
    var assetTypes = useTypedSelector_1.default(function (state) { return state.assets.assetTypes; });
    var selectedDocument = useTypedSelector_1.default(function (state) { return state.selected.document; });
    // Row: Current document / close button
    return (react_1.default.createElement(ui_1.Box, { paddingY: 2 },
        react_1.default.createElement(ui_1.Flex, { align: "center", justify: "space-between" },
            react_1.default.createElement(ui_1.Box, { flex: 1, marginX: 3 },
                react_1.default.createElement(ui_1.Inline, { style: { whiteSpace: 'nowrap' } },
                    react_1.default.createElement(ui_1.Text, { textOverflow: "ellipsis", weight: "semibold" },
                        react_1.default.createElement("span", null, onSelect ? "Insert " + assetTypes.join(' or ') : 'Browse Assets')),
                    selectedDocument && (react_1.default.createElement(ui_1.Box, { display: ['none', 'none', 'block'] },
                        react_1.default.createElement(ui_1.Text, null,
                            react_1.default.createElement("span", { style: { margin: '0 0.5em' } },
                                react_1.default.createElement(icons_1.Icon, { symbol: "arrow-right" })),
                            react_1.default.createElement("span", { style: { textTransform: 'capitalize' } }, selectedDocument._type)))))),
            react_1.default.createElement(ui_1.Flex, { marginX: 2 },
                react_1.default.createElement(ui_1.Button, { fontSize: 1, icon: icons_1.UploadIcon, mode: "bleed", onClick: open, text: "Upload " + (assetTypes.length === 1 ? pluralize_1.default(assetTypes[0]) : 'assets'), tone: "primary" }),
                onClose && (react_1.default.createElement(ui_1.Box, { style: { flexShrink: 0 } },
                    react_1.default.createElement(ui_1.Button, { disabled: !onClose, icon: icons_1.CloseIcon, mode: "bleed", onClick: onClose, radius: 2 })))))));
};
exports.default = Header;
//# sourceMappingURL=index.js.map