"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var icons_1 = require("@sanity/icons");
var ui_1 = require("@sanity/ui");
var react_1 = __importDefault(require("react"));
var react_redux_1 = require("react-redux");
var constants_1 = require("../../constants");
var dialog_1 = require("../../modules/dialog");
var Dialog_1 = __importDefault(require("../Dialog"));
var DialogConfirm = function (props) {
    var children = props.children, dialog = props.dialog;
    // Redux
    var dispatch = react_redux_1.useDispatch();
    // Callbacks
    var handleClose = function () {
        dispatch(dialog_1.dialogActions.remove({ id: dialog === null || dialog === void 0 ? void 0 : dialog.id }));
    };
    var handleConfirm = function () {
        // Close target dialog, if provided
        if (dialog === null || dialog === void 0 ? void 0 : dialog.closeDialogId) {
            dispatch(dialog_1.dialogActions.remove({ id: dialog === null || dialog === void 0 ? void 0 : dialog.closeDialogId }));
        }
        if (dialog === null || dialog === void 0 ? void 0 : dialog.confirmCallbackAction) {
            dispatch(dialog.confirmCallbackAction);
        }
        // Close self
        handleClose();
    };
    var Footer = function () { return (react_1.default.createElement(ui_1.Box, { padding: 3 },
        react_1.default.createElement(ui_1.Flex, { justify: "space-between" },
            react_1.default.createElement(ui_1.Button, { fontSize: 1, mode: "bleed", onClick: handleClose, text: "Cancel" }),
            react_1.default.createElement(ui_1.Button, { fontSize: 1, onClick: handleConfirm, text: dialog === null || dialog === void 0 ? void 0 : dialog.confirmText, tone: dialog === null || dialog === void 0 ? void 0 : dialog.tone })))); };
    var Header = function () { return (react_1.default.createElement(ui_1.Flex, { align: "center" },
        react_1.default.createElement(ui_1.Box, { paddingX: 1 },
            react_1.default.createElement(icons_1.WarningOutlineIcon, null)),
        react_1.default.createElement(ui_1.Box, { marginLeft: 2 }, dialog === null || dialog === void 0 ? void 0 : dialog.headerTitle))); };
    return (react_1.default.createElement(Dialog_1.default, { footer: react_1.default.createElement(Footer, null), header: react_1.default.createElement(Header, null), id: "confirm", onClose: handleClose, width: 1, zOffset: constants_1.Z_INDEX_DIALOG },
        react_1.default.createElement(ui_1.Box, { paddingX: 4, paddingY: 4 },
            react_1.default.createElement(ui_1.Stack, { space: 3 },
                (dialog === null || dialog === void 0 ? void 0 : dialog.title) && react_1.default.createElement(ui_1.Text, { size: 1 }, dialog.title),
                (dialog === null || dialog === void 0 ? void 0 : dialog.description) && (react_1.default.createElement(ui_1.Text, { muted: true, size: 1 },
                    react_1.default.createElement("em", null, dialog.description))))),
        children));
};
exports.default = DialogConfirm;
//# sourceMappingURL=index.js.map